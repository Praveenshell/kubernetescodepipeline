node {
    def app
    
    stage ('Clone repository') {
        checkout scm
    }
    stage ('Build') {
        app = docker.build("praveenshell123/test")
    }
    stage ('Test Build') {
        app.inside {
            sh 'echo "Test Passed"'
        }
    }
    stage ('Security Scan') {
        sh 'chmod +x validation.sh'
        sh './validation.sh > out.txt'
        sh 'cat out.txt'
    }
    stage ('validate') {
        sh 'value=`cat out.txt | grep -i image_success`'
        sh 'echo $value'
        }
}
